{"version":3,"sources":["../../../../server/modules/society/models/queryConnection.js"],"names":["database","require","QueryMediator","queryConnection","query","value","appData","Promise","resolve","reject","connection","getConnection","err","console","log","error","rows","release"],"mappings":";;;;;;;;AAAA,IAAIA,WAAWC,QAAQ,iCAAR,CAAf;;IAEMC,a;;;SAEFC,e,GAAkB,UAACC,KAAD,EAAyB;AAAA,YAAjBC,KAAiB,uEAAT,IAAS;;AACvC,YAAIC,UAAU;AACV,qBAAS,CADC;AAEV,oBAAQ,EAFE;AAGV,yBAAa,EAHH;AAIV,0BAAc;AAJJ,SAAd;AAMA,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCT,qBAASU,UAAT,CAAoBC,aAApB,CAAkC,UAACC,GAAD,EAAMF,UAAN,EAAqB;AACnD,oBAAIE,GAAJ,EAAS;AACLC,4BAAQC,GAAR,CAAY,eAAeF,GAA3B;AACAN,4BAAQS,KAAR,GAAgBH,GAAhB;AACAN,4BAAQ,MAAR,IAAkB,gBAAlB;AACAA,4BAAQ,WAAR,IAAuB,GAAvB;AACAA,4BAAQ,YAAR,IAAwB,EAAxB;AACAG,2BAAOH,OAAP;AACH,iBAPD,MAOO;AACHI,+BAAWN,KAAX,CAAiBA,KAAjB,EAAwB,CAACC,KAAD,CAAxB,EAAiC,UAAUO,GAAV,EAAeI,IAAf,EAAqB;AAClD;AACAN,mCAAWO,OAAX;AACA,4BAAI,CAACL,GAAL,EAAU;AACNN,oCAAQS,KAAR,GAAgB,CAAhB;AACAT,oCAAQ,MAAR,IAAkB,EAAlB;AACAA,oCAAQ,WAAR,IAAuB,GAAvB;AACAA,oCAAQ,YAAR,IAAwBU,IAAxB;AACAR,oCAAQF,OAAR;AACA;AACH,yBAPD,MAOO;AACHA,oCAAQS,KAAR,GAAgBH,GAAhB;AACAN,oCAAQ,MAAR,IAAkB,gBAAlB;AACAA,oCAAQ,WAAR,IAAuB,GAAvB;AACAA,oCAAQ,YAAR,IAAwB,EAAxB;AACAG,mCAAOH,OAAP;AACA;AACH;AACJ,qBAlBD;AAmBH;AACJ,aA7BD;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,SAhDM,CAAP;AAiDH,K;;;kBAIUJ,a","file":"queryConnection.js","sourcesContent":["var database = require('./../../../../database/database');\n\nclass QueryMediator {\n\n    queryConnection = (query, value = null) => {\n        var appData = {\n            'error': 1,\n            'data': '',\n            'satusCode': '',\n            'dbResponse': ''\n        };\n        return new Promise((resolve, reject) => {\n            database.connection.getConnection((err, connection) => {\n                if (err) {\n                    console.log('got error ' + err);\n                    appData.error = err;\n                    appData['data'] = 'Error Occured!';\n                    appData['satusCode'] = 500;\n                    appData['dbResponse'] = '';\n                    reject(appData);\n                } else {\n                    connection.query(query, [value], function (err, rows) {\n                        //console.log(temp.sql);\n                        connection.release();\n                        if (!err) {\n                            appData.error = 0;\n                            appData['data'] = '';\n                            appData['satusCode'] = 201;\n                            appData['dbResponse'] = rows;                            \n                            resolve(appData);\n                            //res.status(201).json(appData);\n                        } else {\n                            appData.error = err;\n                            appData['data'] = 'Error Occured!';\n                            appData['satusCode'] = 400;\n                            appData['dbResponse'] = '';\n                            reject(appData);\n                            //res.status(400).json(err);\n                        }\n                    });\n                }\n            });\n            // connection.query(query, value, function (err, rows) {\n            //     connection.release();\n            //     if (!err) {\n            //         console.log('Ok ');\n            //         appData.error = 0;\n            //         appData['data'] = 'User registered successfully!';\n            //         appData['dbResponse'] = rows;\n            //         appData['satusCode'] = 201;\n            //         resolve(appData);\n            //     } else {\n            //         console.log('got error ' + err);\n            //         appData['data'] = 'Error Occured!';\n            //         appData['satusCode'] = 400;\n            //         appData.error = err;\n            //         reject(appData);\n            //     }\n            // });\n        });\n    }\n\n}\n\nexport default QueryMediator;"]}