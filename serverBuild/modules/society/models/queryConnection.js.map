{"version":3,"sources":["../../../../server/modules/society/models/queryConnection.js"],"names":["database","require","QueryMediator","queryConnection","query","value","appData","console","log","Promise","resolve","reject","connection","getConnection","err","error","rows","release"],"mappings":";;;;;;;;AAAA,IAAIA,WAAWC,QAAQ,iCAAR,CAAf;;IAEMC,a;;;SAEFC,e,GAAkB,UAACC,KAAD,EAAyB;AAAA,YAAjBC,KAAiB,uEAAT,IAAS;;AACvC,YAAIC,UAAU;AACV,qBAAS,CADC;AAEV,oBAAQ,EAFE;AAGV,yBAAa,EAHH;AAIV,0BAAc;AAJJ,SAAd;AAMAC,gBAAQC,GAAR,CAAYJ,KAAZ,EAAoB,UAApB,EAAgCC,KAAhC;AACA,eAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCX,qBAASY,UAAT,CAAoBC,aAApB,CAAkC,UAACC,GAAD,EAAMF,UAAN,EAAqB;AACnD,oBAAIE,GAAJ,EAAS;AACLP,4BAAQC,GAAR,CAAY,eAAeM,GAA3B;AACAR,4BAAQS,KAAR,GAAgBD,GAAhB;AACAR,4BAAQ,MAAR,IAAkB,gBAAlB;AACAA,4BAAQ,WAAR,IAAuB,GAAvB;AACAA,4BAAQ,YAAR,IAAwB,EAAxB;AACAK,2BAAOL,OAAP;AACH,iBAPD,MAOO;AACHM,+BAAWR,KAAX,CAAiBA,KAAjB,EAAwB,CAACC,KAAD,CAAxB,EAAiC,UAAUS,GAAV,EAAeE,IAAf,EAAqB;AAClD;AACAJ,mCAAWK,OAAX;AACA,4BAAI,CAACH,GAAL,EAAU;AACNR,oCAAQS,KAAR,GAAgB,CAAhB;AACAT,oCAAQ,MAAR,IAAkB,EAAlB;AACAA,oCAAQ,WAAR,IAAuB,GAAvB;AACAA,oCAAQ,YAAR,IAAwBU,IAAxB;AACAN,oCAAQJ,OAAR;AACA;AACH,yBAPD,MAOO;AACHA,oCAAQS,KAAR,GAAgBD,GAAhB;AACAR,oCAAQ,MAAR,IAAkB,gBAAlB;AACAA,oCAAQ,WAAR,IAAuB,GAAvB;AACAA,oCAAQ,YAAR,IAAwB,EAAxB;AACAK,mCAAOL,OAAP;AACA;AACH;AACJ,qBAlBD;AAmBH;AACJ,aA7BD;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,SAhDM,CAAP;AAiDH,K;;;kBAIUJ,a","file":"queryConnection.js","sourcesContent":["var database = require('./../../../../database/database');\r\n\r\nclass QueryMediator {\r\n\r\n    queryConnection = (query, value = null) => {\r\n        var appData = {\r\n            'error': 1,\r\n            'data': '',\r\n            'satusCode': '',\r\n            'dbResponse': ''\r\n        };\r\n        console.log(query , 'values =', value);\r\n        return new Promise((resolve, reject) => {\r\n            database.connection.getConnection((err, connection) => {\r\n                if (err) {\r\n                    console.log('got error ' + err);\r\n                    appData.error = err;\r\n                    appData['data'] = 'Error Occured!';\r\n                    appData['satusCode'] = 500;\r\n                    appData['dbResponse'] = '';\r\n                    reject(appData);\r\n                } else {\r\n                    connection.query(query, [value], function (err, rows) {\r\n                        //console.log(temp.sql);\r\n                        connection.release();\r\n                        if (!err) {\r\n                            appData.error = 0;\r\n                            appData['data'] = '';\r\n                            appData['satusCode'] = 201;\r\n                            appData['dbResponse'] = rows;                            \r\n                            resolve(appData);\r\n                            //res.status(201).json(appData);\r\n                        } else {\r\n                            appData.error = err;\r\n                            appData['data'] = 'Error Occured!';\r\n                            appData['satusCode'] = 400;\r\n                            appData['dbResponse'] = '';\r\n                            reject(appData);\r\n                            //res.status(400).json(err);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            // connection.query(query, value, function (err, rows) {\r\n            //     connection.release();\r\n            //     if (!err) {\r\n            //         console.log('Ok ');\r\n            //         appData.error = 0;\r\n            //         appData['data'] = 'User registered successfully!';\r\n            //         appData['dbResponse'] = rows;\r\n            //         appData['satusCode'] = 201;\r\n            //         resolve(appData);\r\n            //     } else {\r\n            //         console.log('got error ' + err);\r\n            //         appData['data'] = 'Error Occured!';\r\n            //         appData['satusCode'] = 400;\r\n            //         appData.error = err;\r\n            //         reject(appData);\r\n            //     }\r\n            // });\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport default QueryMediator;"]}