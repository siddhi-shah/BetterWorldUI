{"version":3,"sources":["../../../../server/modules/society/models/societyModel.js"],"names":["database","require","cors","jwt","process","env","SECRET_KEY","SocietyModel","getOwner","req","searchData","Promise","resolve","reject","appData","connection","getConnection","err","query","rows","console","log","error","updateFlat","updateValue","registerOwner","today","Date","flatData","body","societyId","buildingName","flatNumber","ownerSearchData","phoneNumber","email","ownerInsertData","ownerName","isAdmin","age","gender","password","then","response","JSON","stringify","dbResponse","ownerid","catch","getDetails","params","tableName","getDetailsUsingQueryParam","columnName","value","updatePendingPaymentOfFlat","pendingPayment","flatid","updatePaymentHistory","currentDate","toISOString","replace","registerBuilding","societyid","registerSociety","societyName","address","pincode"],"mappings":"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","file":"societyModel.js","sourcesContent":["var database = require('./../../../../database/database');\nvar cors = require('cors')\nvar jwt = require('jsonwebtoken');\nprocess.env.SECRET_KEY = \"varunv\";\n\nclass SocietyModel {\n\n    getOwner = (req, searchData) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n        database.connection.getConnection((err, connection)=> {\n            connection.query(\"select ownerid from owner where phonenumber = ? and email = ? \", searchData ,function(err, rows) {\n                //console.log(temp.sql);\n                if (!err) {\n                    console.log(\"select owner query working fine \"+rows);\n                    appData.error = 0;\n                    appData[\"data\"] = \"User registered successfully!\";\n                    appData[\"dbResponse\"] = rows;\n                    appData[\"satusCode\"] = 201;\n                    resolve(appData);\n                    //res.status(201).json(appData);\n                } else {\n                    console.log(\"got error \"+err)\n                    appData[\"data\"] = \"Error Occured!\";\n                    appData[\"satusCode\"] = 400;\n                    appData.error = err;\n                    reject(appData);\n                    //res.status(400).json(err);\n                }\n            });\n        });\n        \n    })\n\n    updateFlat = (req, searchData, updateValue) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n        console.log(\"searchData is \",searchData);\n        console.log(\"update value is \", updateValue);\n        try {\n\n            database.connection.getConnection((err, connection)=> {\n                connection.query(`update flat set ownerid = ${updateValue} where \n        societyid = ${searchData[0]} and buildingname = '${searchData[1]}' and \n        flatname = '${searchData[2]}'` ,function(err, rows) {\n            //console.log(temp.sql);\n            if (!err) {\n                console.log(\"select owner query working fine \"+rows);\n                appData.error = 0;\n                appData[\"data\"] = \"User registered successfully!\";\n                appData[\"dbResponse\"] = rows;\n                appData[\"satusCode\"] = 201;\n                resolve(appData);\n                //res.status(201).json(appData);\n            } else {\n                console.log(\"got error \"+err)\n                console.log(`query is ------------ update flat set ownerid = ${updateValue} where \n                societyid = ${searchData[0]} and buildingname = ${searchData[1]} and \n                flatname = ${searchData[2]}`)\n                appData[\"data\"] = \"Error Occured!\";\n                appData[\"satusCode\"] = 400;\n                appData.error = err;\n                reject(appData);\n                //res.status(400).json(err);\n            }\n        });\n            });\n        \n        } catch(error){\n            console.log(\"got error------\",error);\n            reject(error);\n\n        }\n    })\n\n\n    registerOwner = (req) => new Promise((resolve, reject)=>{\n        var today = new Date();\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n        var flatData = [req.body.societyId,req.body.buildingName, req.body.flatNumber];\n        var ownerSearchData = [req.body.phoneNumber, req.body.email]\n        var ownerInsertData =[req.body.ownerName, req.body.isAdmin, req.body.phoneNumber, \n            req.body.email, req.body.age, req.body.gender, req.body.password\n            ]\n            database.connection.getConnection((err, connection) => {\n                connection.query('insert into owner(ownername,isadmin,phonenumber,email, age, gender, password) values (?,?,?,?,?,?,?)', ownerInsertData, (err, rows) => {\n                    //console.log(temp.sql);\n                    if (!err) {\n        \n                        this.getOwner(null, ownerSearchData).then((response)=>{\n                            console.log(\"select owner query is working fine \"+JSON.stringify(response));\n                            console.log(\"dbResponse.rows is \",JSON.stringify(response.dbResponse.rows));\n                            console.log(\"dbResponse.rows[0] is \",JSON.stringify(response.dbResponse));\n                            console.log(\"dbResponse.rows[0].ownerid is \",JSON.stringify(response.dbResponse[0].ownerid));\n        \n                            appData.error = 0;\n                            //appData[\"data\"] = \"Owner id is \"+dbResponse.rows[0].ownerid;\n                            appData[\"ownerid\"] = response.dbResponse[0].ownerid;\n                            appData[\"satusCode\"] = 201;\n                            //resolve(appData);\n                            return appData\n                           // res.status(dbResponse.satusCode).json(dbResponse);\n                        }).then((appData)=>{\n                            resolve(this.updateFlat(null, flatData, appData.ownerid));\n                        }).catch((err)=>{\n                            console.log(\"got error \"+err)\n                            appData[\"data\"] = \"Error Occured!\";\n                            appData[\"satusCode\"] = 400;\n                            appData.error = err;\n                            reject(appData);\n                           // res.status(err.satusCode).json(err);\n                        })\n                        //res.status(201).json(appData);\n                    } else {\n                        console.log(\"got error \"+err)\n                        appData[\"data\"] = \"Error Occured!\";\n                        appData[\"satusCode\"] = 400;\n                        appData.error = err;\n                        reject(appData);\n                        //res.status(400).json(err);\n                    }\n                });\n            });\n        \n    })\n\n    getDetails = (req) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n\n        console.log(\"req.params.tableName\", req.params.tableName);\n        database.connection.getConnection((err, connection) => {\n            connection.query(`select * from ${req.params.tableName}` ,function(err, rows) {\n                //console.log(temp.sql);\n                if (!err) {\n                    console.log(\"select query working fine \"+rows);\n                    appData.error = 0;\n                    appData[\"dbResponse\"] = rows;\n                    appData[\"satusCode\"] = 201;\n                    resolve(appData);\n                    //res.status(201).json(appData);\n                } else {\n                    console.log(\"got error \"+err)\n                    appData[\"satusCode\"] = 400;\n                    appData.error = err;\n                    reject(appData);\n                    //res.status(400).json(err);\n                }\n            });\n        });\n        \n    })\n\n    getDetailsUsingQueryParam = (req) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n\n        console.log(\"req.params.tableName\", req.params.tableName);\n        database.connection.getConnection((err, connection)=> {\n            connection.query(`select * from ${req.params.tableName} where ${req.params.columnName} = ${req.query.value}` ,function(err, rows) {\n                //console.log(temp.sql);\n                if (!err) {\n                    console.log(\"select query working fine \"+rows);\n                    appData.error = 0;\n                    appData[\"dbResponse\"] = rows;\n                    appData[\"satusCode\"] = 201;\n                    resolve(appData);\n                    //res.status(201).json(appData);\n                } else {\n                    console.log(\"got error \"+err)\n                    appData[\"satusCode\"] = 400;\n                    appData.error = err;\n                    reject(appData);\n                    //res.status(400).json(err);\n                }\n            });\n        });\n        \n    })\n\n    updatePendingPaymentOfFlat = (req) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n\n        console.log(\"req.params.tableName\", req.params.tableName);\n        database.connection.getConnection((err, connection) =>{\n            connection.query(`update flat set pendingpayment = '${req.body.pendingPayment}' where ownerid =${req.body.ownerid} and flatId =${req.body.flatid}` ,function(err, rows) {\n                //console.log(temp.sql);\n                if (!err) {\n                    \n                        console.log(\"pending payment successfully updated \"+rows);\n                        appData.error = 0;\n                        appData[\"dbResponse\"] = rows;\n                        appData[\"satusCode\"] = 201;\n                        resolve(appData);\n                    \n\n                    //res.status(201).json(appData);\n                } else {\n                    console.log(\"got error \"+err)\n                    appData[\"satusCode\"] = 400;\n                    appData.error = err;\n                    reject(appData);\n                    //res.status(400).json(err);\n                }\n            });\n        });\n        \n    })\n\n    updatePaymentHistory = (req) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n        const currentDate = new Date();\n        database.connection.getConnection((err, connection) => {\n            connection.query(`insert into paymenthistory(flatid,paid,createddate,updateddate,ownerid) values (${req.body.flatid},${req.body.pendingPayment},'${currentDate.toISOString().replace(/([^T]+)T([^\\.]+).*/g, '$1 $2') }','${currentDate.toISOString().replace(/([^T]+)T([^\\.]+).*/g, '$1 $2') }',${req.body.ownerid});`,function(err, rows) {\n                //console.log(temp.sql);\n                if (!err) {\n                    console.log(\"pending payment history successfully updated \"+rows);\n                    appData.error = 0;\n                    appData[\"dbResponse\"] = rows;\n                    appData[\"satusCode\"] = 201;\n                    resolve(appData);\n                    //res.status(201).json(appData);\n                } else {\n                    console.log(\"got error \"+err)\n                    appData[\"satusCode\"] = 400;\n                    appData.error = err;\n                    reject(appData);\n                    //res.status(400).json(err);\n                }\n            });\n        });\n        \n    })\n    registerBuilding = (req) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n        const currentDate = new Date();\n        database.connection.getConnection((err, connection)=> {\n            connection.query(`insert into building(buildingname, societyid) values\n         ('${req.body.buildingName}',${req.body.societyid});`,function(err, rows) {\n            //console.log(temp.sql);\n            if (!err) {\n                console.log(\"pending payment history successfully updated \"+rows);\n                appData.error = 0;\n                appData[\"dbResponse\"] = rows;\n                appData[\"satusCode\"] = 201;\n                resolve(appData);\n                //res.status(201).json(appData);\n            } else {\n                console.log(\"got error \"+err)\n                appData[\"satusCode\"] = 400;\n                appData.error = err;\n                reject(appData);\n                //res.status(400).json(err);\n            }\n        });\n        });\n        \n    })\n\n    registerSociety = (req) => new Promise((resolve, reject)=>{\n        var appData = {\n            \"error\": 1,\n            \"data\": \"\",\n            \"satusCode\":\"\",\n            \"dbResponse\":\"\"\n        };\n        const currentDate = new Date();\n        database.connection.getConnection((err, connection) =>{\n            connection.query(`insert into society(societyName, address, pincode) values ('${req.body.societyName}', '${req.body.address}', '${req.body.pincode}');`,function(err, rows) {\n                //console.log(temp.sql);\n                if (!err) {\n                    console.log(\"Society is successfully Inserted\"+rows);\n                    appData.error = 0;\n                    appData[\"dbResponse\"] = rows;\n                    appData[\"satusCode\"] = 201;\n                    resolve(appData);\n                    //res.status(201).json(appData);\n                } else {\n                    console.log(\"got error \"+err)\n                    appData[\"satusCode\"] = 400;\n                    appData.error = err;\n                    reject(appData);\n                    //res.status(400).json(err);\n                }\n            });\n        });\n        \n    })\n}\n\nexport default SocietyModel;"]}