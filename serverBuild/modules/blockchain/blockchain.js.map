{"version":3,"sources":["../../../server/modules/blockchain/blockchain.js"],"names":["BlockChain","chain","createGenesisBlock","difficulty","Block","length","newBlock","previousHash","getLatestBlock","hash","mineBlock","push","i","currentBlock","previousBlock","calculateHash"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEMA,U;AACF,0BAAa;AAAA;;AACT,aAAKC,KAAL,GAAW,CAAC,KAAKC,kBAAL,EAAD,CAAX;AACA,aAAKC,UAAL,GAAkB,CAAlB;AACH;;;;6CACmB;AAChB,mBAAO,IAAIC,eAAJ,CAAU,CAAV,EAAa,YAAb,EAA0B,eAA1B,CAAP;AACH;;;yCAEe;AACZ,mBAAO,KAAKH,KAAL,CAAW,KAAKA,KAAL,CAAWI,MAAX,GAAmB,CAA9B,CAAP;AACH;;;iCACQC,Q,EAAS;AACdA,qBAASC,YAAT,GAAwB,KAAKC,cAAL,GAAsBC,IAA9C;AACA;AACAH,qBAASI,SAAT,CAAmB,KAAKP,UAAxB;AACA,iBAAKF,KAAL,CAAWU,IAAX,CAAgBL,QAAhB;AACH;;;uCAEa;AACV,iBAAI,IAAIM,IAAG,CAAX,EAAaA,IAAE,KAAKX,KAAL,CAAWI,MAA1B,EAAiCO,GAAjC,EAAqC;AACjC,oBAAMC,eAAe,KAAKZ,KAAL,CAAWW,CAAX,CAArB;AACA,oBAAME,gBAAgB,KAAKb,KAAL,CAAWW,IAAE,CAAb,CAAtB;AACA,oBAAGC,aAAaJ,IAAb,KAAsBI,aAAaE,aAAb,EAAzB,EAAsD;AAClD,2BAAO,KAAP;AACH;AACD,oBAAGF,aAAaN,YAAb,KAA8BO,cAAcL,IAA/C,EAAoD;AAChD,2BAAO,KAAP;AACH;AAGJ;AACD,mBAAO,IAAP;AACH;;;;;;kBAGUT,U","file":"blockchain.js","sourcesContent":["import Block from './block';\r\n\r\nclass BlockChain {\r\n    constructor(){\r\n        this.chain=[this.createGenesisBlock()];\r\n        this.difficulty = 1;\r\n    }\r\n    createGenesisBlock(){\r\n        return new Block(0, '01/01/2020','genesis block');\r\n    }\r\n\r\n    getLatestBlock(){\r\n        return this.chain[this.chain.length -1];\r\n    }\r\n    addBlock(newBlock){\r\n        newBlock.previousHash = this.getLatestBlock().hash;\r\n        //newBlock.hash= newBlock.calculateHash();\r\n        newBlock.mineBlock(this.difficulty);\r\n        this.chain.push(newBlock);\r\n    }\r\n\r\n    isChainValid(){\r\n        for(let i =1;i<this.chain.length;i++){\r\n            const currentBlock = this.chain[i];\r\n            const previousBlock = this.chain[i-1];\r\n            if(currentBlock.hash !== currentBlock.calculateHash()){\r\n                return false;\r\n            }\r\n            if(currentBlock.previousHash !== previousBlock.hash){\r\n                return false;\r\n            }\r\n\r\n            \r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\nexport default BlockChain;"]}